<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/feedback.css">
</head>

<body>
    <h2>טופס משוב</h2>
    <h1></h1>
    <div class="container">
        <form>
            <div class="row">
                <div class="col-25">
                    <label for="fname">שם</label>
                </div>
                <div class="col-75">
                    <input type="text" id="fname" name="firstname" placeholder="שם שלך">
                </div>
            </div>
            <div class="row">
                <div class="col-25">
                    <label for="lname">משפחה</label>
                </div>
                <div class="col-75">
                    <input type="text" id="lname" name="lastname" placeholder="שם משפחה">
                </div>
            </div>
            <div class="row">
                <div class="col-25">
                    <label for="email">דואר אלקטרוני</label>
                </div>
                <div class="col-75">
                    <input type="email" id="email" name="mailid" placeholder="דואר אלקטרוני">
                </div>
            </div>

            <div class="row">
                <div class="col-25">
                    <label for="feed_back">משוב</label>
                </div>
                <div class="col-75" id="feedback">
                    <textarea id="feedback" name="subject" placeholder="תכתוב משהו" style="height:200px"></textarea>
                </div>
            </div>
            <div class="row">
                <input type="submit" value="שלח" onclick="submit()">
            </div>
        </form>
    </div>
    <script>
        async function submit() {
            const element = document.getElementById('feedback');
            console.log(element.value)
            if (element.value == '') {
                alert('תמלא משוב לפני שתשלח')
            }
            else {
                body = { feedback: element.value }
                const feedbackfetch = await fetch("http://localhost:4000/feedback", {
                    method: "POST",
                    Credentials: "include",
                    headers: { "Content-Type": "application/JSON" },
                    body: JSON.stringify(body),
                });
                const result1 = await feedbackfetch.json();
                if(result1=='faild'){
                    alert('בבקשה תעשה login')
                }
            }
        }
    </script>
</body>

</html>